import { Injectable } from "@angular/core";
import { ActivatedRouteSnapshot, Resolve, RouterStateSnapshot }
  from "@angular/router";
import { Observable,of } from "rxjs";
import { Student } from "../models/student.model";
import { StudentService } from "./student.service";



import {map, catchError} from 'rxjs/operators';

@Injectable()
export class StudentListResolverService implements Resolve<Student[] | string>{
    
   // resolve data before displaying partial page

    constructor(private _studentServie: StudentService){}

    EmptystudentsList: Student[] = [];

    resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot)
    :Observable<Student[] | string> {
 

       return this._studentServie.getStudents()
       .pipe(   
               catchError((err : string) => of(err))
           );
     
    }
    
}